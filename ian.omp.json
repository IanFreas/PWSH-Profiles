{
    "$schema": "https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json",
    "blocks": [
      {
        "alignment": "left",
        "newline": true,
        "segments": [
          // Segment 1: Time
          {
            "foreground": "#E5C07B", // Yellowish
            "properties": {
              "time_format": "15:04" // HH:MM format
            },
            "style": "plain",
            "template": "[{{ .CurrentDate | date .Format }}]",
            "type": "time"
          },
          // Segment 2: User@Host (Whitespace Fixed)
          {
            "type": "session",
            "style": "plain",
            "foreground": "#98C379", // Default color: Green (for non-root)
            "foreground_templates": [
              // If user is root, change foreground to red
              "{{ if .Root }}#E06C75{{ end }}"
            ],
            // Template: User icon, Username@Hostname (Removed trailing space)
            "template": " \uf007 {{ .UserName }}@{{ .HostName }}", // <-- Space removed here
            "properties": {
              // Explicitly ensure host is displayed
              "display_host": true
            }
          },
          // Segment 3: Shell Type
          {
            "type": "shell",
            "style": "plain",
            "foreground": "#E06C75", // Reddish
            "properties": {
              "mapped_shell_names": { // Custom names for shells
                "pwsh": "PWSH",
                "powershell": "Powershell",
                "cmd": "Cmd",
                "bash": "Bash"
              }
            },
            // \ue795 is a PowerShell icon, adjust if needed for other primary shells
            "template": " \ue795 {{ .Name }}"
          },
          // Segment 4: Git Status
          {
            "foreground": "#F3C267", // Default Git color: Gold/Orange
            "foreground_templates": [ // Conditional coloring for Git status
              "{{ if or (.Working.Changed) (.Staging.Changed) }}#FF9248{{ end }}", // Orange if changes
              "{{ if and (gt .Ahead 0) (gt .Behind 0) }}#ff4500{{ end }}", // Red/Orange if diverged
              "{{ if gt .Ahead 0 }}#B388FF{{ end }}", // Purple if ahead
              "{{ if gt .Behind 0 }}#B388FF{{ end }}" // Purple if behind
            ],
            "properties": {
              "branch_template": "{{ trunc 25 .Branch }}", // Truncate long branch names
              "fetch_stash_count": true, // Show stash count
              "fetch_status": true, // Show upstream/downstream status
              "fetch_upstream_icon": true // Show icon for upstream status
            },
            "style": "plain",
            // Template for Git info: Upstream icon, HEAD (branch/commit), status, changes, stash
            "template": " {{ .UpstreamIcon }}{{ .HEAD }}{{if .BranchStatus }} {{ .BranchStatus }}{{ end }}{{ if .Working.Changed }} \uf044 {{ .Working.String }}{{ end }}{{ if and (.Working.Changed) (.Staging.Changed) }} |{{ end }}{{ if .Staging.Changed }} \uf046 {{ .Staging.String }}{{ end }}{{ if gt .StashCount 0 }} \ueb4b {{ .StashCount }}{{ end }} ",
            "type": "git"
          }
        ],
        "type": "prompt" // Type of block: main prompt line
      },
      // Block 2: Right-aligned prompt
      {
        "alignment": "right",
        "segments": [
          // Segment 1 (Right): Exit Status
          {
            "type": "status",
            "style": "plain",
            "foreground": "#b8ff75", // Light Green
            "foreground_templates": [
              "{{ if gt .Code 0 }}#E06C75{{ end }}" // Red if error code > 0
            ],
            "template": " x{{ reason .Code }}" // Display 'x' followed by reason/code
          },
          // Segment 2 (Right): Execution Time
          {
            "foreground": "#b8ff75", // Light Green
            "foreground_templates": [
              "{{ if gt .Code 0 }}#E06C75{{ end }}" // Red if last command had error
            ],
            "properties": {
              "style": "roundrock", // Specific formatting style for time
              "always_enabled": true // Always show execution time
            },
            "style": "diamond", // Diamond shape background/separator
            "template": " {{ .FormattedMs }} ", // Display formatted milliseconds
            "type": "executiontime"
          }
        ],
        "type": "prompt"
      },
      // Block 3: Second line, Path
      {
        "alignment": "left",
        "newline": true, // Starts on a new line
        "segments": [
          {
            "foreground": "#61AFEF", // Blue
            "properties": {
              "style": "full" // Show the full path
            },
            "style": "plain",
            // \ue5ff is a folder icon
            "template": "\ue5ff {{ .Path }}",
            "type": "path"
          }
        ],
        "type": "prompt"
      },
      // Block 4: Third line, Prompt Indicator
      {
        "alignment": "left",
        "newline": true, // Starts on a new line
        "segments": [
          // Segment 1 (Line 3): Root indicator (shows '!' if root)
          {
            "foreground": "#E06C75", // Red
            "style": "plain",
            "template": "\u0021", // Exclamation mark character
            "type": "root"
          },
          // Segment 2 (Line 3): Prompt character
          {
            "foreground": "#E06C75", // Red
            "style": "plain",
            "template": "\u276f", // Heavy right-pointing angle quotation mark ornament
            "type": "text" // Simple text segment
          }
        ],
        "type": "prompt"
      }
    ],
    "final_space": true, // Add a space after the entire prompt
    "version": 3 // Oh My Posh config version
  }

